# Bot 使用指南

## 1. 核心功能概述

本机器人基于 NoneBot2 框架开发，使用 NapCatQQ 作为底层驱动，支持多种功能插件。

### 核心特性
- 极简轻量：不依赖复杂环境，安装即用
- 优雅架构：Python 开发，类型安全
- 热插拔插件：模块化设计，功能扩展无忧
- 高性能：基于 NoneBot 事件驱动模型
- 跨平台支持：Windows/Linux/macOS 全兼容

## 2. 插件功能列表

### 2.1 命令插件 (cmds.py)

提供基础管理命令，仅超级用户可用。

#### 命令列表

| 命令 | 描述 | 使用示例 |
|------|------|----------|
| `#状态` | 查看机器人运行状态 | `#状态` |
| `#关于` | 查看机器人关于信息 | `#关于` |
| `#退出` | 退出机器人进程 | `#退出` |
| `#设置 详情` | 查看机器人设置详情 | `#设置 详情` |

#### 功能说明

- **#状态**：显示机器人运行时间、内存使用、硬盘使用、插件数量等信息
- **#关于**：显示机器人框架、技术架构等信息
- **#退出**：安全关闭机器人进程
- **#设置 详情**：显示超级用户配置等信息

### 2.2 便签插件 (notes.py)

用于创建和管理便签，仅超级用户可用。

#### 命令列表

| 命令 | 描述 | 使用示例 |
|------|------|----------|
| `#新建便签 <内容>` | 创建新便签，支持文本和图片 | `#新建便签 今天天气真好` 或带图片的便签 |
| `#便签 撤回` | 撤回上一条创建的便签 | `#便签 撤回` |
| `#便签 预览` | 在浏览器中预览所有便签 | `#便签 预览` |

#### 功能说明

- **#新建便签**：创建包含文本或图片的便签，自动生成唯一文件名
- **#便签 撤回**：删除上一条创建的便签文件和记录
- **#便签 预览**：生成HTML预览文件并在浏览器中打开，显示最近10条便签

### 2.3 关键词插件 (keyword)

支持关键词匹配回复和AI聊天功能。

#### 关键词管理命令

| 命令 | 描述 | 使用示例 |
|------|------|----------|
| `#kw` | 显示关键词命令菜单 | `#kw` |
| `#kw rm <关键词>` | 删除指定关键词 | `#kw rm 你好` |
| `#kw on` | 在当前群开启关键词回复 | `#kw on` |
| `#kw off` | 在当前群关闭关键词回复 | `#kw off` |
| `#关键词添加包含 <关键词>，<回复内容>` | 添加包含匹配关键词 | `#关键词添加包含 天气，今天天气真好` |
| `#关键词添加确切 <关键词>，<回复内容>` | 添加精确匹配关键词 | `#关键词添加确切 你是谁，我是智能机器人` |

#### 关键词回复功能

- 支持**精确匹配**和**包含匹配**两种模式
- 支持**正则表达式**格式的关键词（如 `/你好|hello/i`）
- 支持**图片回复**（添加关键词时附带图片即可）
- 支持**冷却时间**设置，防止频繁回复
- 支持**群聊开关**，可在指定群开启或关闭

#### AI聊天功能

- 被@时如果没有匹配到关键词，会自动调用AI回复
- 支持**文本**和**图片**输入
- 基于火山引擎ARK API

### 2.4 AI聊天插件 (orange)

提供AI聊天功能，支持多种命令和交互方式。

#### 命令列表

| 命令 | 描述 | 使用示例 |
|------|------|----------|
| `#gpt <内容>` | 使用GPT模式聊天，支持文本和图片 | `#gpt 介绍一下人工智能` 或带图片的查询 |
| `#chat <内容>` | 使用简化版聊天模式 | `#chat 今天吃什么好呢？` |
| `@机器人 <内容>` | 被@时进行AI聊天，支持文本和图片 | `@机器人 你能做什么？` |
| `oi <内容>` | 使用oi前缀进行AI聊天 | `oi 讲个笑话` |

#### 功能说明

- 支持**多轮对话**，上下文理解
- 支持**图片识别**和**图片描述**
- 支持**自然语言理解**，能够处理复杂问题
- 性格设定：友善、乐于助人且带一点中二幽默感

## 3. 交互方式

### 3.1 命令交互

使用 `#` 前缀的命令进行交互，例如：
- `#状态` - 查看机器人状态
- `#gpt 你好` - 与AI聊天
- `#新建便签 测试内容` - 创建便签

### 3.2 @交互

在群聊中@机器人进行AI聊天，例如：
- `@机器人 你能做什么？`
- `@机器人 帮我看看这张图片`（附带图片）

### 3.3 前缀交互

使用 `oi` 前缀进行AI聊天，例如：
- `oi 讲个笑话`
- `oi 今天天气怎么样？`

### 3.4 关键词交互

当发送包含已设置关键词的消息时，机器人会自动回复，例如：
- 设置关键词 `你好` 回复 `你好呀！`
- 发送 `你好` 时，机器人会回复 `你好呀！`

## 4. 配置与管理

### 4.1 超级用户

超级用户拥有最高权限，可以使用所有命令。

### 4.2 群聊管理

- 使用 `#kw on` 和 `#kw off` 命令在指定群开启或关闭关键词回复
- 关键词默认在所有群启用（配置中 `-1` 表示全局启用）

### 4.3 关键词管理

- 支持添加、删除、查看关键词
- 支持设置精确匹配或包含匹配
- 支持正则表达式和图片回复
- 支持设置冷却时间

## 5. 运行与维护

### 5.1 启动机器人

```bash
# Windows
python bot.py

# Linux/macOS
python3 bot.py
```

### 5.2 查看日志

机器人运行时会输出详细日志，包含：
- 插件加载情况
- 消息接收和处理情况
- 错误信息和调试信息

### 5.3 更新插件

将新的插件文件放入 `plugins` 目录，重启机器人即可加载。

## 6. 最佳实践

### 6.1 AI聊天技巧

- 清晰明确地描述问题，获得更准确的回答
- 可以使用图片+文字的方式提问，AI能够理解图片内容
- 对于复杂问题，可以分步骤提问
- 被@时可以直接提问，不需要额外命令

### 6.2 关键词设置建议

- 避免设置过于通用的关键词，以免频繁触发
- 使用精确匹配模式设置重要关键词
- 为常用回复设置关键词，提高回复效率
- 定期清理不再使用的关键词

### 6.3 便签使用建议

- 用于记录重要信息和灵感
- 支持图片，可用于保存图片资料
- 使用预览功能查看历史便签
- 可在博客目录中直接编辑和管理便签文件

## 7. 常见问题

### 7.1 机器人没有响应？

- 检查机器人是否在线
- 检查命令格式是否正确
- 检查是否有权限使用该命令
- 检查群聊中是否开启了关键词回复

### 7.2 AI回复较慢？

- AI回复需要调用外部API，可能受网络影响
- 复杂问题需要更长的处理时间
- 可尝试简化问题或分步骤提问

### 7.3 关键词不生效？

- 检查关键词是否正确设置
- 检查关键词匹配模式是否正确
- 检查是否在冷却时间内
- 检查群聊中是否开启了关键词回复

## 8. 技术支持

如遇到问题或需要功能扩展，可：
- 查看机器人日志获取详细错误信息
- 检查插件配置文件
- 重启机器人尝试解决问题
- 联系开发者获取技术支持

---

**版本信息**：
- 底层框架：NoneBot2
- 驱动：NapCatQQ
- AI引擎：火山引擎ARK API
- 开发语言：Python 3.8+

**开源协议**：MIT License
